---
layout: layout
title: Art Portfolio
---

<div class="portfolio-container">
  <div class="portfolio-header">
    <p class="portfolio-subtitle">A collection of my artistic works</p>
  </div>

  <div id="portfolio-content">
    <!-- Portfolio sections will be loaded here dynamically -->
  </div>
</div>

<!-- Image Modal for Click-to-Magnify -->
<div id="imageModal" class="image-modal">
  <span class="modal-close">&times;</span>
  <img class="modal-content" id="modalImage">
</div>

<script>
  async function loadPortfolio() {
    try {
      const response = await fetch('data/portfolio.json');
      const data = await response.json();
      const portfolioContainer = document.getElementById('portfolio-content');

      // Define section titles
      const sections = {
        'crochet': 'Crochet',
        'gongbi': 'Gongbi',
        'xieyi': 'Xieyi'
      };

      // Create each section
      Object.keys(sections).forEach(sectionKey => {
        const sectionData = data.portfolio[sectionKey];

        // Create section container
        const sectionDiv = document.createElement('div');
        sectionDiv.className = 'gallery-section';

        // Create section header
        const sectionHeader = document.createElement('h2');
        sectionHeader.textContent = sections[sectionKey];
        sectionDiv.appendChild(sectionHeader);

        // Create gallery grid
        const galleryGrid = document.createElement('div');
        galleryGrid.className = 'gallery-grid';

        // Add each artwork item
        sectionData.forEach(artwork => {
          const galleryItem = document.createElement('div');
          galleryItem.className = 'gallery-item';

          galleryItem.innerHTML = `
          <img src="${artwork.image}" alt="${artwork.alt}" onerror="this.src='images/profile-photo.pic.jpg'">
          <div class="overlay">
            <div class="overlay-content">
              <h3>${artwork.title}</h3>
              <p>${artwork.description}</p>
            </div>
          </div>
        `;

          galleryGrid.appendChild(galleryItem);
        });

        sectionDiv.appendChild(galleryGrid);
        portfolioContainer.appendChild(sectionDiv);
      });

      // Initialize modal functionality after content is loaded
      initializeModal();

    } catch (error) {
      console.error('Error loading portfolio:', error);
      document.getElementById('portfolio-content').innerHTML =
        '<p class="error-message">Error loading portfolio. Please try again later.</p>';
    }
  }

  function initializeModal() {
    const modal = document.getElementById('imageModal');
    const modalImg = document.getElementById('modalImage');
    const galleryImages = document.querySelectorAll('.gallery-item img');
    const closeBtn = document.querySelector('.modal-close');

    // Add click event to all gallery images
    galleryImages.forEach(img => {
      img.addEventListener('click', function (e) {
        e.stopPropagation();
        modal.classList.add('active');
        modalImg.src = this.src;
        modalImg.alt = this.alt;
        document.body.style.overflow = 'hidden'; // Prevent background scrolling
      });
    });

    // Close modal when clicking the X or background
    function closeModal() {
      modal.classList.remove('active');
      document.body.style.overflow = 'auto'; // Restore scrolling
    }

    closeBtn.addEventListener('click', closeModal);
    modal.addEventListener('click', closeModal);
    modalImg.addEventListener('click', function (e) {
      e.stopPropagation(); // Prevent closing when clicking the image itself
    });

    // Close modal with Escape key
    document.addEventListener('keydown', function (e) {
      if (e.key === 'Escape' && modal.classList.contains('active')) {
        closeModal();
      }
    });
  }

  // Load portfolio when the page loads
  document.addEventListener('DOMContentLoaded', loadPortfolio);
</script>